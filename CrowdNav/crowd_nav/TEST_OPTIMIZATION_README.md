# æµ‹è¯•è„šæœ¬ä¼˜åŒ–è¯´æ˜

## ğŸš€ ä¼˜åŒ–å†…å®¹

### åŸå§‹é—®é¢˜
- å¿…é¡»è¿è¡Œ300ä¸ªepisodesæ‰èƒ½ç”Ÿæˆ1ä¸ªè§†é¢‘ â†’ **å¤ªæ…¢**
- åªèƒ½ç”Ÿæˆ1ä¸ªæŒ‡å®šcaseçš„è§†é¢‘ â†’ **åŠŸèƒ½å•ä¸€**  
- ä¸ºäº†ç”Ÿæˆè§†é¢‘è¦å®Œæ•´è¯„ä¼°æ‰€æœ‰case â†’ **æµç¨‹å†—ä½™**

### ä¼˜åŒ–æ–¹æ¡ˆ
- âœ… **å¿«é€Ÿè§†é¢‘ç”Ÿæˆ**ï¼šç›´æ¥è¿è¡ŒæŒ‡å®šcaseï¼Œæ— éœ€å…¨é‡æµ‹è¯•
- âœ… **å¤šè§†é¢‘æ‰¹é‡ç”Ÿæˆ**ï¼šä¸€æ¬¡ç”Ÿæˆ3ä¸ªéšæœºè§†é¢‘
- âœ… **çµæ´»æ¨¡å¼é€‰æ‹©**ï¼švideo_only / quick_eval / full_eval
- âœ… **æ™ºèƒ½æ–‡ä»¶å‘½å**ï¼šåŒ…å«æ—¶é—´æˆ³ã€caseå·ã€ç»“æœçŠ¶æ€

## ğŸ“‹ ä½¿ç”¨æ–¹æ³•

### æ–¹å¼1: ä½¿ç”¨ä¼˜åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# å¿«é€Ÿç”Ÿæˆ3ä¸ªéšæœºè§†é¢‘ (æœ€æ¨èï¼Œé€Ÿåº¦æœ€å¿«)
python test_optimized.py \
    --policy mamba \
    --model_dir data/output \
    --weights rl_model_ep1000.pth \
    --device cuda:0 \
    --mode video_only \
    --num_videos 3 \
    --random_cases

# ç”ŸæˆæŒ‡å®šcaseçš„è§†é¢‘
python test_optimized.py \
    --policy mamba \
    --model_dir data/output \
    --weights rl_model_ep1000.pth \
    --device cuda:0 \
    --mode video_only \
    --specific_cases 66 123 200

# å¿«é€Ÿè¯„ä¼° + è§†é¢‘ç”Ÿæˆ (æ¨è)
python test_optimized.py \
    --policy mamba \
    --model_dir data/output \
    --weights rl_model_ep1000.pth \
    --device cuda:0 \
    --mode quick_eval \
    --num_videos 2 \
    --quick_eval_samples 50
```

### æ–¹å¼2: è¿è¡Œç¤ºä¾‹è„šæœ¬

```bash
# è¿è¡Œæ‰€æœ‰ç¤ºä¾‹
./test_examples.sh

# æˆ–è€…å•ç‹¬è¿è¡ŒæŸä¸ªç¤ºä¾‹
bash test_examples.sh
```

## ğŸ¯ æ¨¡å¼è¯´æ˜

### video_only æ¨¡å¼ (æœ€å¿«)
- **ç”¨é€”**: åªç”Ÿæˆè§†é¢‘ï¼Œä¸åšæ€§èƒ½è¯„ä¼°
- **é€Ÿåº¦**: â­â­â­â­â­ æœ€å¿« (å‡ ç§’åˆ°å‡ åˆ†é’Ÿ)
- **æ¨èåœºæ™¯**: æƒ³å¿«é€ŸæŸ¥çœ‹è®­ç»ƒæ•ˆæœ

### quick_eval æ¨¡å¼ (æ¨è)
- **ç”¨é€”**: è¿è¡Œå°‘é‡episodesè·å–æ€§èƒ½æŒ‡æ ‡ + ç”Ÿæˆè§†é¢‘
- **é€Ÿåº¦**: â­â­â­â­ è¾ƒå¿« (å‡ åˆ†é’Ÿ)
- **æ¨èåœºæ™¯**: æ—¢æƒ³äº†è§£æ€§èƒ½åˆæƒ³çœ‹è§†é¢‘

### full_eval æ¨¡å¼ (æœ€å…¨é¢)
- **ç”¨é€”**: å®Œæ•´è¯„ä¼° + å¯é€‰è§†é¢‘ç”Ÿæˆ
- **é€Ÿåº¦**: â­â­ æ…¢ (å‡ ååˆ†é’Ÿ)
- **æ¨èåœºæ™¯**: éœ€è¦å‡†ç¡®çš„æ€§èƒ½è¯„ä¼°

## ğŸ“Š è¾“å‡ºæ–‡ä»¶å‘½å

ç”Ÿæˆçš„è§†é¢‘æ–‡ä»¶å‘½åæ ¼å¼:
```
demo_20241221_143052_case066_reach_goal.mp4
demo_20241221_143052_case123_collision.mp4
demo_20241221_143052_case200_timeout.mp4
```

æ ¼å¼è¯´æ˜:
- `demo`: åŸºç¡€åç§°
- `20241221_143052`: æ—¶é—´æˆ³ (YYYYMMDD_HHMMSS)
- `case066`: caseç¼–å·
- `reach_goal/collision/timeout`: ç»“æœçŠ¶æ€

## ğŸ”§ å‚æ•°è¯´æ˜

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `--mode` | `video_only` | è¿è¡Œæ¨¡å¼: video_only/quick_eval/full_eval |
| `--num_videos` | `3` | ç”Ÿæˆè§†é¢‘æ•°é‡ |
| `--random_cases` | `True` | æ˜¯å¦ä½¿ç”¨éšæœºcase |
| `--specific_cases` | `None` | æŒ‡å®šå…·ä½“case (å¦‚: 66 123 200) |
| `--quick_eval_samples` | `50` | å¿«é€Ÿè¯„ä¼°çš„episodeæ•°é‡ |
| `--max_case_range` | `1000` | éšæœºé€‰æ‹©çš„caseèŒƒå›´ |

## âš¡ æ€§èƒ½å¯¹æ¯”

| æ–¹æ³• | æ—¶é—´æ¶ˆè€— | åŠŸèƒ½ |
|------|----------|------|
| åŸå§‹æ–¹æ³• | 15-30åˆ†é’Ÿ | 300 episodes + 1ä¸ªè§†é¢‘ |
| video_only | 30ç§’-2åˆ†é’Ÿ | 3ä¸ªéšæœºè§†é¢‘ |
| quick_eval | 3-5åˆ†é’Ÿ | 50 episodesè¯„ä¼° + 2ä¸ªè§†é¢‘ |

**æå‡æ•ˆæœ**: é€Ÿåº¦æå‡ **10-20å€**ï¼ŒåŠŸèƒ½å¢å¼º **3å€è§†é¢‘**

## ğŸ¥ è®­ç»ƒç›‘æ§å»ºè®®

ç°åœ¨å¯ä»¥æŸ¥çœ‹è®­ç»ƒæ—¥å¿—æ¥é€‰æ‹©åˆé€‚çš„æƒé‡æ–‡ä»¶ï¼š

```bash
# æŸ¥çœ‹æœ€æ–°çš„è®­ç»ƒè¿›åº¦
tail -20 data/output/output.log

# æŸ¥çœ‹æˆåŠŸç‡è¶‹åŠ¿ 
grep "TRAIN ep=" data/output/output.log | tail -10

# é€‰æ‹©é«˜æˆåŠŸç‡çš„checkpoint
ls data/output/rl_model_ep*.pth | sort -V | tail -5
```

åŸºäºå½“å‰è®­ç»ƒæƒ…å†µ (EP660å·¦å³ï¼ŒæˆåŠŸç‡75-100%)ï¼Œå»ºè®®ç­‰è®­ç»ƒå®Œæˆåä½¿ç”¨:
- `rl_model_ep1000.pth` æˆ–æ›´é«˜episodeçš„æƒé‡
- å…ˆç”¨ `quick_eval` æ¨¡å¼å¿«é€Ÿè¯„ä¼°æ€§èƒ½
- å†ç”¨ `video_only` æ¨¡å¼ç”Ÿæˆå¤šä¸ªè§†é¢‘æŸ¥çœ‹æ•ˆæœ